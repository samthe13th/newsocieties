<div class="harvest-cards">
  <div *ngFor="let row of landGrid; let r = index" class="card-row">
    <div 
      *ngFor="let card of row; let i = index"
      class="land-tile"
      [class.contaminated]="card.contaminated == true"
      [attr.data-badge]="card.owner ? card.owner.name : null"
      [attr.data-division]="card.owner ? card.owner.division : null"
      [class.empty]="card.value === -1"
      [class.owned]="card.owner !== null"
    >
      <card
        (click)="selectTile(r, i, tileSelectSheet)"
        [(side)]="card.side"
        width="45"
        height="45"
        [class.owned]="true"
        [mark]="card.mark"
        [class.disabled]="card.value == -1 || card.contaminated == true"
        (sideChange)="process(r, i)">

        <div front class="harvest-card">
          <div 
            *ngIf="card.value > 0"
            class="resource" 
            [class.one]="card.value === 1"
            [class.two]="card.value === 2"
            [class.three]="card.value === 3">
            {{card.value}}
          </div>
          <div *ngIf="card.value === 0" class="contamination">
            <img src="../assets/contamination.png"/>
          </div>
        </div>
        <div back class="harvest-card back"></div>
      </card>
    </div>
  </div>
</div>
<button (click)="newHarvest()">New</button>

<ng-template #tileSelectSheet>
  <div class="action-sheet">
    {{ selectedResourceStatus?.message }}
    <div 
      *ngIf="selectedResourceStatus?.status === 'explorable'" 
      class="large-action-button"
      (click)="explore()">
      <fa-icon size="lg" [icon]="exploreIcon"></fa-icon>
      Explore (e)
    </div>
    <div 
      *ngIf="selectedResourceStatus?.status === 'explored' || selectedResourceStatus?.status === 'explorable'"
      class="large-action-button"
      (click)="gather()">
      <fa-icon size="lg" [icon]="gatherIcon"></fa-icon>
      Gather (g)
    </div>
  </div>
</ng-template>