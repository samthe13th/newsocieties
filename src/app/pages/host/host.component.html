<app-tabs 
  class="host-side-panel"
  selectedClass="host-selected-tab"
  [tabs]="[
    { id: 'division', tabTemplate: division, bodyTemplate: divisionBody },
    { id: 'global', tabTemplate: global, bodyTemplate: globalBody },
    { id: 'io', tabTemplate: io, bodyTemplate: ioBody },
    { id: 'central', tabTemplate: central, bodyTemplate: centralBody },
    { id: 'notes', tabTemplate: notes, bodyTemplate: notesBody }
  ]">
</app-tabs>

<div class="host-main">
  <div class="button-row">
    <button (click)="focus = 'harvest'">Harvest</button>
    <button (click)="focus = 'resolution'">Resolution</button>
  </div>
  <div *ngIf="focus === 'harvest'" class="harvest-wrapper">
    <h1>Harvest</h1>
    <div *ngIf="action !== 'harvesting'">
      <button (click)="startHarvest()" class="large-action-button">
        Start Harvest
      </button>
    </div>
    <app-land-grid 
      *ngIf="action === 'harvesting'"
      [markCards]="true"
      [showId]="showId"
      [updatePath]="landTilesPath"> 
    </app-land-grid>
  </div>
  <div *ngIf="focus === 'resolution'" class="resolution-wrapper">
    <h1>Resolution</h1>
    <div *ngIf="action !== 'voting'">
      {{ resPrompt }}
      <button (click)="startVote()" class="large-action-button">
        Start Vote
      </button>
    </div>
    <ng-container *ngIf="action === 'voting'">
      <app-vote 
        (selectionChange)="onSelectionChange($event)"
        [showVotes]="true"
        [showId]="showId"
        [divisionId]="divisionId"
        [includeOtherOption]="true"
      ></app-vote>
      <ng-container *ngIf="divisionVote && divisionVote.value !== ''">
        <h2>Set Resolution</h2>
        <button (click)="resolveVote()">CONFIRM</button>
      </ng-container>
    </ng-container>
  </div>
</div>

<!-- TABS-->
<ng-template #division>Division</ng-template>
<ng-template #global>Global</ng-template>
<ng-template #io>I/O</ng-template>
<ng-template #central>Central</ng-template>
<ng-template #notes>Notes</ng-template>

<!-- DIVISION -->
<ng-template #divisionBody>
  <app-society-summary
    *ngIf="division"
    details="full"
    [division]="division">
  </app-society-summary>
  <button (click)="newSeason()">New Season</button>
</ng-template>

<!-- GLOBAL -->
<ng-template #globalBody>
  <span *ngIf="contamination !== undefined">
    Contamination Level: {{contamination}}%
  </span>
</ng-template>

<!-- I/O -->
<ng-template #ioBody>
  I/O
</ng-template>

<!-- CENTRAL -->
<ng-template #centralBody>
  <app-chat [sender]="divisionId" [feedName]="divisionId" [showKey]="showId"></app-chat>
  <textarea
    (keydown.enter)="submitChat(divisionId)"
    class="host-chat-input"
    name="chatInput"
    type="text"
    [(ngModel)]="chatInput">
  </textarea>
  <button class="host-chat-button" (click)="submitChat(divisionId)">SEND</button>
</ng-template>

<!-- NOTES -->
<ng-template #notesBody>
  <div class="button-row">
    <button [style.font-size.px]="14" (click)="fontSizeDown()">Aa</button>
    <button [style.font-size.px]="20" (click)="fontSizeUp()">Aa</button>
  </div>
  <br/>
  <textarea [style.font-size.px]="fontSize" class="host-notes">Type notes here!</textarea>
</ng-template>